<!DOCTYPE html>
<html lang="">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Product Page</title>
    <link href="../static/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="../static/product_page.css" rel="stylesheet" type="text/css" media="all" />

    <!-- //Custom Theme files -->
    <!-- web font -->
    <link href="//fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>
<body>
    <!-- Shopping Cart (Top Right) -->
    <div class="shopping-cart">
         <div class="header-content">
            <div class="logo">
                <div class = "logo">Furnihub</div>
            </div>
            <div class="header-right">
                <div class="greeting" id="user-dropdown">
                    <span id="username">Hello, {{customer.username}}</span>
                    <div class="dropdown-content" id="user-dropdown-content">
                        <a href="#" id="profile">My Profile</a>
                        <a href="#" id="my-orders">My Orders</a>
                        <a href="#" id="logout">Logout</a>

                    </div>
                </div>
                <div class="cart" class="go-to-cart-button" id="go-to-cart-button">
                    <i class="fa fa-shopping-cart"></i>
                    <span id="cart-count">0</span>
                </div>
            </div>
        </div>
    </div>

     <div id="profileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>My Profile</h2>
                <span class="close" onclick="closeProfileModal()">&times;</span>
            </div>
           <div class="profile-info">
            <img src="../static/images/common/profile_default.jpg" alt="Profile Image" class="profile-image">
            <div class="profile-details">
                <h2>{{ customer.username }}</h2>
                <p>ID: 123456</p>
                <p>Email: {{customer.email}}</p>
                <p>Mobile: {{customer.mobile_number}}</p>
                <p>Address: {{customer.address}}</p>
            </div>
        </div>
        </div>
    </div>

    <div id="ordersModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>My Orders</h2>
            <span class="close" onclick="closeOrdersModal()">&times;</span>
        </div>
        <div class="modal-body">
            {% for order in orders %}
                <div class="order">
                    <div class = "order-head">
                        <div>
                            <div class="order-number">Order #{{ order.order_number }}</div>
                            <div class="order-status">{{ order.order_status }}</div>
                        </div>
                        <div>
                            <button class="cancel-order-button" data-product-id="{{ product }}" id="cancel-order" >
                                Cancel Order
                            </button>
                        </div>
                    </div>
                    <p class="total-cost">Total Cost: ${{ order.total_cost }}</p>
                    <div class = "orders-list">
                    {% for product in order.products %}
                        <div class="product-card">
                            <img src="{{ product.image_url }}" alt="{{ product.name }}" class="order-image">
                            <div class="product-details">
                                <p>Name: {{ product.name }}</p>
                                <p>Product ID: {{ product.product_id }}</p>
                                <p>Quantity: {{ product.quantity }}</p>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

    <div class = "break"></div>
<!--    <h1>Product Page</h1>-->
    <nav>
        <ul>
            <li><a href="#" id = "category-home">Home</a></li>
            <li><a href="#" id = "coffee-table-link">Coffee Tables</a></li>
            <li><a  href="#" id = "dining_chair-link">Dining Chairs</a></li>
            <li><a href="#" id = "dining_set_link">Dining Sets</a></li>
            <li><a href="#" id = "office-chair-link">Office Chairs</a></li>
            <li><a href="#" id = "recliners-link">Recliners</a></li>
            <li><a href="#" id = "shoe-cabinet-link">Shoe Cabinets</a></li>
            <li><a href="#" id = "sofa-link">Sofas</a></li>
        </ul>
    </nav>

    <!-- Product Listing -->
    <div class="product-list" id = "product-type"></div>

    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Product Details</h2>
                <span class="close" onclick="closeProductModal()">&times;</span>
            </div>
            <div class="modal-body" id="product-details">
                <!-- Product details will be displayed here dynamically -->
            </div>
        </div>
    </div>

    <script>
        var products = [];
        products = {{ products|tojson|safe }};
        productsData = {{ products|tojson|safe }};

        var orders = [];
        orders = {{ orders|tojson|safe }};
        ordersData = {{ orders|tojson|safe }};

        function closeProfileModal() {
            document.getElementById('profileModal').style.display = 'none';
        }

        function closeOrdersModal(){
            document.getElementById('ordersModal').style.display = 'none';
        }

        // Function to close product modal
        function closeProductModal(){
            var modal = document.getElementById('productModal');
            modal.style.display = 'none';
        }

    </script>
    <script type = "module" src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
